<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>A Map of Information</title>
    <link href="https://google-developers.appspot.com/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyAwjXdrflAnmI81HQAJDgykj2f9od1z5lY"></script>
    <script src="https://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer_compiled.js"></script>
    <script>
    	{% if flag %}
    		var jsonparams = eval('{{countries_json}}');
			function initialize() {
				alert("To see the title of a marker, hover over the marker but don't click.");
				var myLatlng = new google.maps.LatLng(37.39361,-122.099263)
				var mapOptions = {
					zoom: 3,
					center: myLatlng,
					mapTypeId: google.maps.MapTypeId.ROADMAP
				}
				var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

				i = 0;
				var markers = [];
				for ( pos in jsonparams ) {
					i = i + 1;
					var row = jsonparams[pos];
					window.console && console.log(row);
					// if ( i < 3 ) { alert(row); }
					var newLatlng = new google.maps.LatLng(row[0], row[1]);
					var marker = new google.maps.Marker({
						position: newLatlng,
						map: map,
						title: row[2]
					});
					markers.push(marker);
				}
			}
		{% else %}
			<form action="/" method="get">
				Enter number of tweets: <input type="text" name="number_tweets"><br>
				<input type="submit" value="Submit">
			</form>
		{% endif %}
    </script>
  </head>
  <body onload="initialize()">
<div id="map_canvas" style="height: 500px"></div>
</body>
</html>